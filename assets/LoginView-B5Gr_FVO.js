import{r as l,c as m,u as C,a as i,b as e,w as c,d as p,e as x,v,f as y,g as V,h as N,o as u,i as S}from"./index-Drwx44IE.js";import{a as q}from"./index-NIGUFBhG.js";const B={id:"loginPage",class:"bg-yellow"},P={class:"conatiner loginPage vhContainer"},T={class:"formControls",action:"index.html"},U={key:0},E={key:1},I="https://todolist-api.hexschool.io",D={__name:"LoginView",setup(L){const t=l(""),s=l(""),n=l(!1),g=l([]),d=l(""),f=N(),w=m(()=>n.value&&t.value===""),_=m(()=>n.value&&s.value===""),b=C(),h=async()=>{if(n.value=!0,!(!t.value||!s.value))try{const a=await q.post(`${I}/users/sign_in`,{email:t.value,password:s.value});alert("登入成功"),t.value="",s.value="",n.value=!1,d.value=a.data.token,b.setToken(a.data.token),console.log(d.value),await f.push("/todo")}catch(a){alert("登入失敗"),g.value=JSON.parse(a.request.response)}};return(a,o)=>{const k=V("router-link");return u(),i("div",B,[e("div",P,[o[6]||(o[6]=e("div",{class:"side"},[e("a",{href:"#"},[e("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),e("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),e("div",null,[e("form",T,[o[3]||(o[3]=e("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1)),o[4]||(o[4]=e("label",{class:"formControls_label",for:"email"},"Email",-1)),c(e("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":o[0]||(o[0]=r=>t.value=r)},null,512),[[v,t.value]]),w.value?(u(),i("span",U,"此欄位不可留空")):p("",!0),o[5]||(o[5]=e("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),c(e("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":o[1]||(o[1]=r=>s.value=r)},null,512),[[v,s.value]]),_.value?(u(),i("span",E,"此欄位不可留空")):p("",!0),e("input",{class:"formControls_btnSubmit",type:"button",onClick:h,value:"登入"}),x(k,{to:"/signup",class:"formControls_btnLink"},{default:y(()=>[...o[2]||(o[2]=[S("註冊帳號",-1)])]),_:1})])])])])}}};export{D as default};
