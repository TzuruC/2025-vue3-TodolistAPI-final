import{u as T,r as u,c as p,j as $,a as l,b as t,k as d,w,v as x,F as C,l as b,d as _,t as f,o as i,m as B}from"./index-Drwx44IE.js";import{a as c}from"./index-NIGUFBhG.js";const D={id:"todoListPage",class:"bg-half"},N={class:"conatiner todoListPage vhContainer"},O={class:"todoList_Content"},S={class:"inputBox"},V={class:"todoList_list"},z={class:"todoList_items"},A={class:"todoList_item"},E={class:"todoList_label"},M=["checked"],P=["onClick"],F={class:"todoList_statistics"},U={key:0},j={key:1},h="https://todolist-api.hexschool.io",J={__name:"ToDoListView",setup(I){const r=T(),n=u(""),a=u([]);u("");const m=async()=>{try{const e=await c.get(`${h}/todos/`,{headers:{Authorization:` ${r.token}`}});a.value=e.data.data}catch(e){console.log(e),alert("取得待辦失敗")}},v=p(()=>a.value.length===0),g=p(()=>a.value.filter(e=>e.status).length),k=async()=>{if(!n.value.trim()){alert("請輸入內容");return}try{const e=await c.post(`${h}/todos/`,{content:n.value},{headers:{Authorization:`${r.token}`}});a.value.push(e.data.newTodo),n.value=""}catch(e){console.log("Error:",e.response?.data||e.message),alert("新增待辦失敗")}},L=async e=>{const o=a.value.find(s=>s.id===e);if(confirm(`確定要刪除 "${o?.content}" 嗎？`))try{await c.delete(`${h}/todos/${e}`,{headers:{Authorization:`${r.token}`}}),a.value=a.value.filter(s=>s.id!==e)}catch{alert("刪除失敗")}};function y(){B.push("/")}return $(()=>{m()}),(e,o)=>(i(),l("div",D,[t("nav",null,[o[2]||(o[2]=t("h1",null,[t("a",{href:"#"},"ONLINE TODO LIST")],-1)),t("ul",null,[o[1]||(o[1]=t("li",{class:"todo_sm"},[t("a",{href:"#"},[t("span",null,"王小明的代辦")])],-1)),t("li",null,[t("a",{href:"#loginPage",onClick:d(y,["prevent"])},"登出")])])]),t("div",N,[t("div",O,[t("div",S,[w(t("input",{type:"text",placeholder:"請輸入待辦事項","onUpdate:modelValue":o[0]||(o[0]=s=>n.value=s)},null,512),[[x,n.value]]),t("a",{href:"#",onClick:d(k,["prevent"])},[...o[3]||(o[3]=[t("i",{class:"fa fa-plus"},null,-1)])])]),t("div",V,[o[5]||(o[5]=t("ul",{class:"todoList_tab"},[t("li",null,[t("a",{href:"#",class:"active"},"全部")]),t("li",null,[t("a",{href:"#"},"待完成")]),t("li",null,[t("a",{href:"#"},"已完成")])],-1)),t("div",z,[t("ul",A,[(i(!0),l(C,null,b(a.value,s=>(i(),l("li",{key:s.id},[t("label",E,[t("input",{class:"todoList_input",type:"checkbox",checked:s.status},null,8,M),t("span",null,f(s.content),1)]),t("a",{href:"#",onClick:d(q=>L(s.id),["prevent"])},[...o[4]||(o[4]=[t("i",{class:"fa fa-times"},null,-1)])],8,P)]))),128))]),t("div",F,[v.value?_("",!0):(i(),l("p",U,f(g.value)+" 個已完成項目",1)),v.value?(i(),l("p",j,"目前尚無待辦事項")):_("",!0)])])])])])]))}};export{J as default};
